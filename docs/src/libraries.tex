\section{Libraries of the \CYS Distribution}
\label{sec:libraries}

{\setlength{\parindent}{0.0cm}

The \CYS distribution comes with a set of base libraries
and an extensive collection of libraries for application programming
that can be downloaded with the Curry Package Manager
(see Section~\ref{sec-cpm}).
The available packages can be found on-line.\footnote{%
\url{https://cpm.curry-lang.org/}}
Below we sketch some packages for meta-programming
followed by the complete description of the base libraries
with all exported types and functions.
For a more detailed online documentation of the base libraries of \CYS,
see \url{https://cpm.curry-lang.org/pkgs/base.html}.

\subsection{AbstractCurry and FlatCurry: Meta-Programming in Curry}
\label{sec-flatcurry}

\index{AbstractCurry}
\index{FlatCurry}
To support meta-programming, i.e., the manipulation of Curry programs
in Curry, there are Curry packages \code{flatcurry} and \code{abstractcurry}
which define datatypes for the representation of Curry programs.
\code{AbstractCurry.Types} (package \code{abstractcurry})
is a more direct representation of a Curry program,
whereas \code{FlatCurry.Types} (package \code{flatcurry})
is a simplified representation
where local function definitions are replaced by global definitions
(i.e., lambda lifting has been performed) and pattern matching
is translated into explicit case/or expressions.
Thus, \code{FlatCurry.Types} can be used for more back-end oriented
program manipulations (or, for writing new back ends for Curry),
whereas \code{AbstractCurry.Types} is intended for manipulations of
programs that are more oriented towards the source program.

There are predefined I/O actions to read AbstractCurry and
FlatCurry programs: \code{AbstractCurry.Files.readCurry}\pindex{readCurry})
and \code{FlatCurry.Files.readFlatCurry}\pindex{readFlatCurry}).
These actions parse the corresponding source program and return
a data term representing this program (according to the definitions
in the modules \code{AbstractCurry.Types} and \code{FlatCurry.Types}).

Since all datatypes are explained in detail in these modules,
we refer to the online documentation\footnote{%
\url{https://cpm.curry-lang.org/pkgs/flatcurry.html}\\
\url{https://cpm.curry-lang.org/pkgs/abstract-curry.html}}
of these packages.

As an example, consider a program file \ccode{test.curry}
containing the following two lines:
\begin{curry}
rev :: [a] -> [a]
rev []     = []
rev (x:xs) = (rev xs) ++ [x]
\end{curry}
Then the I/O action \code{(FlatCurry.Files.readFlatCurry "test")} returns the
following term:
\begin{curry}
Prog "test"
  ["Prelude"]
  []
  [Func ("test","rev") 1 Public
    (ForallType [(0,KStar)] (FuncType (TCons ("Prelude","[]") [TVar 0])
                                      (TCons ("Prelude","[]") [TVar 0])))
    (Rule [1]
       (Case Flex (Var 1)
          [Branch (Pattern ("Prelude","[]") [])
             (Comb ConsCall ("Prelude","[]") []),
           Branch (Pattern ("Prelude",":") [2,3])
             (Comb FuncCall ("Prelude","++")
                   [Comb FuncCall ("test","rev") [Var 3],
                    Comb ConsCall ("Prelude",":")
                         [Var 2,Comb ConsCall ("Prelude","[]") []]
                   ])]))]
  []
\end{curry}


\newpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Definitions in order to compile LaTeX documents generated by "currydoc --tex"
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\currymodule}[1]{\subsubsection{Library #1}\label{Library:#1}}
\newcommand{\currytypesynstart}[2]{{\tt type #2}\pindex{#1} \begin{quote}}
\newcommand{\currytypesynstop}{\end{quote}}
\newcommand{\currydatastart}[1]{{\tt data #1}\pindex{#1} \begin{quote}}
\newcommand{\currynewtypestart}[1]{{\tt newtype #1}\pindex{#1} \begin{quote}}
\newcommand{\currydataconsstart}{\end{quote}%
\begin{itemize}\item[] \hspace{-4ex}\emph{Exported constructors:}}
\newcommand{\currydataconsstop}{\end{itemize}}
\newcommand{\curryconsstart}[2]{\item {\tt #1~::~#2}\pindex{#1}\par}
\newcommand{\curryfunctionstart}[2]{#2\pindex{#1}\begin{quote}}
\newcommand{\curryfunctionstop}{\end{quote}}
\newcommand{\curryfuncsig}[2]{{\tt #1~::~#2}}
\newcommand{\curryfieldstart}[2]{\item {\tt #1~::~#2}\par}
\newcommand{\curryinstancestart}[2]{{\tt #1~::~#2}}
\newcommand{\curryclassstart}[1]{#1\pindex{#1}\begin{quote}}
\newcommand{\curryclassstop}{\end{quote}}
\newcommand{\currydatainstsstart}{\begin{itemize}\item[] \hspace{-4ex}\emph{Known instances:}}
\newcommand{\currydatainstsstop}{\end{itemize}}
\newcommand{\currynoinsts}{}
\newcommand{\currynocons}{\end{quote}}

% for downward compatibility:
\newcommand{\currytype}[3]{{\tt type #2}\pindex{#1} \begin{quote} #3 \end{quote}}
\newcommand{\currydata}[3]{{\tt data #1}\pindex{#1} \begin{quote}#2\end{quote}%
\begin{itemize}\item[] \hspace{-4ex}\emph{Exported constructors:} #3\end{itemize}}
\newcommand{\curryfunction}[3]{#2\pindex{#1}  \begin{quote}#3\end{quote}}
\newcommand{\currycons}[3]{\item {\tt #1~::~#2}\par #3}
\newcommand{\currydatacons}{\end{quote}%
\begin{itemize}\item[] \hspace{-4ex}\emph{Exported constructors:}}
\newcommand{\currydatastop}{\end{itemize}}
\newcommand{\currytypesstart}{\subsubsection*{Exported types:}}
\newcommand{\currytypesstop}{}
\newcommand{\curryfuncstart}{\subsubsection*{Exported functions:}}
\newcommand{\curryfuncstop}{}
\newcommand{\curryclassesstart}{\subsubsection*{Exported typeclasses:}}
\newcommand{\curryclassesstop}{}


\subsection{System Libraries}

\input{lib/Prelude}
\newpage
\input{lib/Control.Applicative}
\newpage
\input{lib/Control.Monad}
\newpage
\input{lib/Control.Search.AllValues}
\newpage
\input{lib/Control.Search.SetFunctions}
\newpage
\input{lib/Control.Search.Unsafe}
\newpage
\input{lib/Curry.Compiler.Distribution}
\newpage
\input{lib/Data.Char}
\newpage
\input{lib/Data.Either}
\newpage
\input{lib/Data.Function}
\newpage
\input{lib/Data.Functor.Compose}
\newpage
\input{lib/Data.Functor.Const}
\newpage
\input{lib/Data.Functor.Identity}
\newpage
\input{lib/Data.IORef}
\newpage
\input{lib/Data.List}
\newpage
\input{lib/Data.Maybe}
\newpage
\input{lib/Data.Monoid}
\newpage
\input{lib/Debug.Trace}
\newpage
\input{lib/Numeric}
\newpage
\input{lib/System.Console.GetOpt}
\newpage
\input{lib/System.CPUTime}
\newpage
\input{lib/System.Environment}
\newpage
\input{lib/System.IO}
\newpage
\input{lib/System.IO.Unsafe}
\newpage
\input{lib/Test.Prop}
\newpage
\input{lib/Test.Prop.Types}
\newpage
\input{lib/Text.Show}

} % end setlength parindent


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "manual"
%%% End:
